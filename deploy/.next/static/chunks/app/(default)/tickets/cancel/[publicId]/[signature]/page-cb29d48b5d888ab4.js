(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{1612:(t,e,n)=>{Promise.resolve().then(n.bind(n,4230)),Promise.resolve().then(n.t.bind(n,3300,23)),Promise.resolve().then(n.bind(n,7035))},1695:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(5055);function r(t){let{loading:e,disabled:n,type:r="submit",className:a="",onClick:o,children:s}=t;return(0,i.jsxs)("button",{type:r,className:"".concat("btn btn-primary text-light"," ").concat(a).trim(),disabled:e||n,onClick:o,children:[e&&(0,i.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),s]})}n(8183)},4695:(t,e,n)=>{"use strict";n.d(e,{AU:()=>f,Br:()=>r,ML:()=>a,QL:()=>l,RY:()=>c,ZT:()=>s,kz:()=>u,oP:()=>d,v6:()=>o,vO:()=>i});class i extends Error{constructor(t,e){super(t),this.code=e}}function r(t){let e=new Date().getTime(),n=(null==t?void 0:t.registrationOpensAt)&&new Date(t.registrationOpensAt).getTime();return!!n&&!!(e<n)}function a(t){let e=new Date().getTime(),n=(null==t?void 0:t.registrationClosesAt)&&new Date(t.registrationClosesAt).getTime();return!!n&&!!(e>n)}async function o(t){let e="".concat(h(),"/public/otp"),n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(!n.ok){let t=await n.json();throw Error((null==t?void 0:t.detail)||"Verification request failed.")}}async function s(t,e){let n="".concat(h(),"/public/").concat(t,"?signature=").concat(e),i=await fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!i.ok){let t=await i.json();throw Error((null==t?void 0:t.detail)||"Cancellation failed.")}}async function c(t,e){let n="".concat(h(),"/public/verify"),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,code:e})});if(!i.ok){let t=await i.json();throw Error((null==t?void 0:t.detail)||"Verification failed.")}return await i.json()}async function l(){let t="".concat(h(),"/public/availability"),e=await fetch(t,{method:"GET"});if(!e.ok){let t=await e.json();throw Error((null==t?void 0:t.detail)||"Failed to fetch availability.")}return await e.json()}async function d(t,e){let n="".concat(h(),"/public/").concat(t,"/tickets?signature=").concat(e),i=await fetch(n);if(404===i.status)return{tickets:[]};if(!i.ok){let t=await i.json();throw Error((null==t?void 0:t.detail)||"Failed to fetch tickets.")}return await i.json()}async function u(t,e,n,r,a,o){let s="".concat(h(),"/public/register"),c=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,firstName:e,lastName:n,additionalDetails:r,requestedTickets:a,verificationToken:o})});if(!c.ok){let t=await c.json();if((null==t?void 0:t.errorCode)==="validation")throw new i(t&&"object"==typeof t.errors&&null!==t.errors?Object.values(t.errors).flat().map(String).join(", "):String(t.errors),t.errorCode);throw new i((null==t?void 0:t.detail)||"Registration failed.",null==t?void 0:t.errorCode)}return!0}async function f(t,e,n){let r="".concat(h(),"/public/").concat(t,"/tickets?signature=").concat(e),a=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestedTickets:n})});if(!a.ok){let t=await a.json();if((null==t?void 0:t.errorCode)==="validation")throw new i(t&&"object"==typeof t.errors&&null!==t.errors?Object.values(t.errors).flat().map(String).join(", "):String(t.errors),t.errorCode);throw new i((null==t?void 0:t.detail)||"Registration update failed.",null==t?void 0:t.errorCode)}return!0}function h(){let t=n(3946).R.admitto;return"".concat(t.baseUrl,"/teams/").concat(t.teamSlug,"/events/").concat(t.eventSlug)}},7035:(t,e,n)=>{"use strict";n.d(e,{default:()=>d});var i=n(5055),r=n(8183),a=n(1816),o=n(1695),s=n(3783),c=n.n(s),l=n(4695);function d(t){let{publicId:e,signature:n}=t,s=(0,a.useRouter)(),[d,u]=(0,r.useState)(!1),[f,h]=(0,r.useState)(""),m=async t=>{t.preventDefault(),u(!0),h("");try{await (0,l.ZT)(e,n),s.push("/tickets/cancel/confirmation")}catch(t){u(!1),h(t.message||"Registration failed. Please try again.")}};return(0,i.jsx)("form",{onSubmit:m,className:"cancel-form",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{children:"Are you sure you want to cancel your registration?"}),f&&(0,i.jsx)("div",{className:"text-danger my-2",children:f}),(0,i.jsxs)("div",{className:"text-center",children:[d?(0,i.jsx)("button",{type:"button",className:"btn btn-primary mt-2 me-2 text-light",disabled:!0,children:"No, keep my registration"}):(0,i.jsx)(c(),{href:"/",className:"btn btn-primary mt-2 me-2 text-light",children:"No, keep my registration"}),(0,i.jsx)(o.A,{loading:d,className:"btn-danger mt-2 me-2",children:"Yes, cancel my registration"})]})]})})}}},t=>{t.O(0,[386,758,739,853,429,358],()=>t(t.s=1612)),_N_E=t.O()}]);