(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{1695:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5055);function n(e){let{loading:t,disabled:a,type:n="submit",className:r="",onClick:i,children:l}=e;return(0,s.jsxs)("button",{type:n,className:"".concat("btn btn-primary text-light"," ").concat(r).trim(),disabled:t||a,onClick:i,children:[t&&(0,s.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l]})}a(8183)},2487:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5055);function n(e){let{error:t}=e;return(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,s.jsxs)("div",{className:"card h-100 shadow-sm w-50",children:[(0,s.jsx)("div",{className:"card-header text-danger text-center",children:(0,s.jsx)("h3",{children:"Unexpected Error"})}),(0,s.jsx)("div",{className:"card-body lead text-center",children:t})]})})}a(8183)},4695:(e,t,a)=>{"use strict";a.d(t,{AU:()=>u,Br:()=>n,ML:()=>r,QL:()=>o,RY:()=>c,ZT:()=>l,kz:()=>m,oP:()=>d,v6:()=>i,vO:()=>s});class s extends Error{constructor(e,t){super(e),this.code=t}}function n(e){let t=new Date().getTime(),a=(null==e?void 0:e.registrationOpensAt)&&new Date(e.registrationOpensAt).getTime();return!!a&&!!(t<a)}function r(e){let t=new Date().getTime(),a=(null==e?void 0:e.registrationClosesAt)&&new Date(e.registrationClosesAt).getTime();return!!a&&!!(t>a)}async function i(e){let t="".concat(h(),"/public/otp"),a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!a.ok){let e=await a.json();throw Error((null==e?void 0:e.detail)||"Verification request failed.")}}async function l(e,t){let a="".concat(h(),"/public/").concat(e,"?signature=").concat(t),s=await fetch(a,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!s.ok){let e=await s.json();throw Error((null==e?void 0:e.detail)||"Cancellation failed.")}}async function c(e,t){let a="".concat(h(),"/public/verify"),s=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})});if(!s.ok){let e=await s.json();throw Error((null==e?void 0:e.detail)||"Verification failed.")}return await s.json()}async function o(){let e="".concat(h(),"/public/availability"),t=await fetch(e,{method:"GET"});if(!t.ok){let e=await t.json();throw Error((null==e?void 0:e.detail)||"Failed to fetch availability.")}return await t.json()}async function d(e,t){let a="".concat(h(),"/public/").concat(e,"/tickets?signature=").concat(t),s=await fetch(a);if(404===s.status)return{tickets:[]};if(!s.ok){let e=await s.json();throw Error((null==e?void 0:e.detail)||"Failed to fetch tickets.")}return await s.json()}async function m(e,t,a,n,r,i){let l="".concat(h(),"/public/register"),c=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,firstName:t,lastName:a,additionalDetails:n,requestedTickets:r,verificationToken:i})});if(!c.ok){let e=await c.json();if((null==e?void 0:e.errorCode)==="validation")throw new s(e&&"object"==typeof e.errors&&null!==e.errors?Object.values(e.errors).flat().map(String).join(", "):String(e.errors),e.errorCode);throw new s((null==e?void 0:e.detail)||"Registration failed.",null==e?void 0:e.errorCode)}return!0}async function u(e,t,a){let n="".concat(h(),"/public/").concat(e,"/tickets?signature=").concat(t),r=await fetch(n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestedTickets:a})});if(!r.ok){let e=await r.json();if((null==e?void 0:e.errorCode)==="validation")throw new s(e&&"object"==typeof e.errors&&null!==e.errors?Object.values(e.errors).flat().map(String).join(", "):String(e.errors),e.errorCode);throw new s((null==e?void 0:e.detail)||"Registration update failed.",null==e?void 0:e.errorCode)}return!0}function h(){let e=a(3946).R.admitto;return"".concat(e.baseUrl,"/teams/").concat(e.teamSlug,"/events/").concat(e.eventSlug)}},5499:(e,t,a)=>{"use strict";a.d(t,{default:()=>h});var s=a(5055),n=a(8183),r=a(1816),i=a(2487),l=a(3946);function c(e){return e.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",timeZone:"Europe/Amsterdam"})}function o(e){let{availability:t}=e,a=l.R.currentEdition,n=null==t?void 0:t.ticketTypes.find(e=>e.slug===l.R.admitto.mainConferenceTicketSlug);return n&&n.hasCapacity?(0,s.jsxs)("div",{className:"card h-100 shadow-sm mt-3 mb-4",children:[(0,s.jsx)("div",{className:"card-header text-center",children:(0,s.jsxs)("h3",{children:["General Admission - ",c(a.conferenceDate)]})}),(0,s.jsxs)("div",{className:"card-body text-start mx-5",children:[(0,s.jsxs)("p",{children:["Tickets to Azure Fest are ",(0,s.jsx)("strong",{children:"100% free"})," and include parking & diner."]}),(0,s.jsxs)("p",{children:["This registration reserves your seat for the full conference day.",(0,s.jsx)("span",{className:"badge text-bg-success ms-2",children:"Available"})]})]})]}):(0,s.jsxs)("div",{className:"card h-100 shadow-sm mt-3 mb-4",children:[(0,s.jsx)("div",{className:"card-header text-center",children:(0,s.jsxs)("h3",{children:["General Admission - ",c(a.conferenceDate),(0,s.jsx)("span",{className:"badge bg-danger ms-2",children:"Sold Out"})]})}),(0,s.jsx)("div",{className:"card-body text-start mx-5",children:(0,s.jsx)("p",{children:"General admission is currently fully booked."})})]})}function d(e){let{details:t,setDetails:a,disabled:n,children:r}=e,i=e=>{a({...t,[e.target.name]:e.target.value})};return(0,s.jsxs)("div",{className:"card h-100 shadow-sm mt-3",children:[(0,s.jsx)("div",{className:"card-header text-center",children:(0,s.jsx)("h3",{children:"Tell us a bit about yourself"})}),(0,s.jsxs)("div",{className:"card-body text-center mx-5",children:[(0,s.jsxs)("div",{className:"form-group mb-3 text-start",children:[(0,s.jsxs)("label",{htmlFor:"firstName",className:"form-label",children:["First name",(0,s.jsx)("span",{className:"text-danger",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:i,maxLength:50,required:!0,className:"form-control",disabled:n})]}),(0,s.jsxs)("div",{className:"form-group mb-3 text-start",children:[(0,s.jsxs)("label",{htmlFor:"lastName",className:"form-label",children:["Last name",(0,s.jsx)("span",{className:"text-danger",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:i,maxLength:50,required:!0,className:"form-control",disabled:n})]}),(0,s.jsxs)("div",{className:"form-group mb-3 text-start",children:[(0,s.jsxs)("label",{htmlFor:"employmentStatus",className:"form-label",children:["Are you employed or self-employed?",(0,s.jsx)("span",{className:"text-danger",children:"*"})]}),(0,s.jsxs)("select",{id:"employmentStatus",name:"employmentStatus",value:t.employmentStatus,onChange:i,required:!0,className:"form-control",disabled:n,children:[(0,s.jsx)("option",{value:"",children:"Please select"}),(0,s.jsx)("option",{value:"Employed",children:"Employed"}),(0,s.jsx)("option",{value:"SelfEmployed",children:"Self-employed"})]})]}),(0,s.jsxs)("div",{className:"form-group mb-3 text-start",children:[(0,s.jsx)("label",{htmlFor:"companyName",className:"form-label",children:"Company name (optional)"}),(0,s.jsx)("input",{type:"text",id:"companyName",name:"companyName",value:t.companyName,onChange:i,maxLength:120,className:"form-control",disabled:n})]}),r]})]})}var m=a(1695),u=a(4695);function h(e){var t,a;let{email:c,token:h}=e,[f,x]=(0,n.useState)(!0),[p,j]=(0,n.useState)(""),[v,y]=(0,n.useState)(!1),[g,N]=(0,n.useState)(""),[b,w]=(0,n.useState)(null),[k,S]=(0,n.useState)({firstName:"",lastName:"",employmentStatus:"",companyName:""}),C=(0,n.useRef)(null),T=(0,r.useRouter)();(0,n.useEffect)(()=>{!async function(){try{let e=await (0,u.QL)();w(e),x(!1)}catch(e){j(e.message||"Could not fetch ticket availability."),x(!1)}}()},[]),(0,n.useEffect)(()=>{(""===c||""===h)&&T.push("/tickets/register/expired")},[c,h,T]);let E=(0,n.useMemo)(()=>null==b?void 0:b.ticketTypes.find(e=>e.slug===l.R.admitto.mainConferenceTicketSlug),[b]),O=!!(null==E?void 0:E.hasCapacity),R=async e=>{e.preventDefault(),y(!0),N("");try{await (0,u.kz)(c,k.firstName,k.lastName,[{name:"EmploymentStatus",value:k.employmentStatus},{name:"CompanyName",value:k.companyName}],[l.R.admitto.mainConferenceTicketSlug],h),T.push("/tickets/register/thankyou")}catch(e){e instanceof u.vO&&"attendee.invalid_token"===e.code?T.push("/tickets/register/expired"):(y(!1),N(e.message||"Registration failed. Please try again."))}};return f||""===c||""===h?(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):p?(0,s.jsx)(i.A,{error:p}):b&&(0,u.Br)(b)?(0,s.jsxs)("div",{className:"card h-100 shadow-sm",children:[(0,s.jsx)("div",{className:"card-header text-center",children:(0,s.jsx)("h3",{children:"Registration is closed"})}),(0,s.jsx)("div",{className:"card-body text-center",children:"Registration is not open yet. Please check back later."})]}):b&&(0,u.ML)(b)?(0,s.jsxs)("div",{className:"card h-100 shadow-sm",children:[(0,s.jsx)("div",{className:"card-header text-center",children:(0,s.jsx)("h3",{children:"Registration is closed"})}),(0,s.jsx)("div",{className:"card-body text-center",children:"Registration for this event has closed. See you next time!"})]}):(0,s.jsx)("div",{className:"mx-auto",children:(0,s.jsxs)("form",{ref:C,onSubmit:R,className:"ticket-form",children:[(0,s.jsx)(o,{availability:b}),(0,s.jsx)(d,{details:k,setDetails:S,disabled:v,children:(0,s.jsxs)("div",{className:"text-center mt-3",children:[g&&(0,s.jsx)("div",{className:"text-danger mt-2",children:g}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(m.A,{loading:v,disabled:!(null!=(a=null==(t=C.current)?void 0:t.checkValidity())&&a&&O),className:"mt-2",children:"Register"})})]})})]})})}},9793:(e,t,a)=>{Promise.resolve().then(a.bind(a,4230)),Promise.resolve().then(a.t.bind(a,3300,23)),Promise.resolve().then(a.bind(a,5499))}},e=>{e.O(0,[386,758,739,853,429,358],()=>e(e.s=9793)),_N_E=e.O()}]);